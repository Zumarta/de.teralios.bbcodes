if(!Tera){var Tera={}}Tera.xAttachment={_editorID:"",init:function(e){this._editorID=e;WCF.DOMNodeInsertedHandler.addCallback("Tera.Directory",$.proxy(this._catchButton,this));this._catchButton()},_catchButton:function(){$(".jsButtonInsertAttachment").off("click");$(".jsButtonInsertAttachment").click($.proxy(this._xAttachInsert,this))},_xAttachInsert:function(e){var t=$(e.currentTarget).data("objectID");var n="[xattach="+t+"][/xattach]";var r=$.browser.mobile?null:$("#"+this._editorID).ckeditorGet();if(r!==null&&r.mode==="wysiwyg"){r.insertText(n)}else{var i=$.browser.mobile?$("#"+this._editorID):$("#"+this._editorID).next(".cke_editor_text").find("textarea");var s=i.val();if(s.length==0){i.val(n)}else{var o=i.getCaret();i.val(s.substr(0,o)+n+s.substr(o))}}}}