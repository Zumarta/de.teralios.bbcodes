if(!Tera){var Tera={}}Tera.xAttachment={_editorID:"",_wcf21:false,init:function(e,t){this._editorID=e;this._wcf21=t;WCF.DOMNodeInsertedHandler.addCallback("Tera.Directory",$.proxy(this._catchButton,this));this._catchButton()},_catchButton:function(){$(".jsButtonInsertAttachment").off("click");$(".jsButtonInsertAttachment").click($.proxy(this._xAttachInsert,this))},_xAttachInsert:function(e,t){var n=e===null?t:$(e.currentTarget).data("objectID");var r="[xattach="+n+"][/xattach]";if(this._wcf21==false){this._insertVersion20(r)}else{this._insertVersion21(r)}},_insertVersion20:function(e){var t=e;var n=$.browser.mobile?null:$("#"+this._editorID).ckeditorGet();if(n!==null&&n.mode==="wysiwyg"){n.insertText(t)}else{var r=$.browser.mobile?$("#"+this._editorID):$("#"+this._editorID).next(".cke_editor_text").find("textarea");var i=r.val();if(i.length==0){r.val(t)}else{var s=r.getCaret();r.val(i.substr(0,s)+t+i.substr(s))}}},_insertVersion21:function(e){var t=e;if($.browser.redactor){$("#"+this._editorID).redactor("insertDynamic",t)}}}