if(!Tera)var Tera={};Tera.xAttachment=Class.extend({_editorID:"",_wcf21:!1,init:function(t,e){this._editorID=t,this._wcf21=e,WCF.DOMNodeInsertedHandler.addCallback("Tera.xAttachment",$.proxy(this._catchButton,this)),this._catchButton()},_catchButton:function(){$(".jsButtonInsertAttachment").off("click"),$(".jsButtonInsertAttachment").click($.proxy(this._xAttachInsert,this))},_xAttachInsert:function(t,e){var r=null===t?e:$(t.currentTarget).data("objectID"),i="[xattach="+r+"][/xattach]";0==this._wcf21?this._insertVersion20(i):this._insertVersion21(i)},_insertVersion20:function(t){var e=t,r=$.browser.mobile?null:$("#"+this._editorID).ckeditorGet();if(null!==r&&"wysiwyg"===r.mode)r.insertText(e);else{var i=$.browser.mobile?$("#"+this._editorID):$("#"+this._editorID).next(".cke_editor_text").find("textarea"),n=i.val();if(0==n.length)i.val(e);else{var s=i.getCaret();i.val(n.substr(0,s)+e+n.substr(s))}}},_insertVersion21:function(t){var e=t;$.browser.redactor&&$("#"+this._editorID).redactor("insertDynamic",e)}});