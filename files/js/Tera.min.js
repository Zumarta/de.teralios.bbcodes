"use strict";if(!Tera){var Tera={}}Tera.Directory=Class.extend({_id:"",_addClass:"",init:function(id,addClass){if(id.substring(0,1)!="#"){this._id="#"+id}else{this._id=id}this._addClass=addClass;this.parse()},parse:function(){var htmlSource=$("#directoryParse").contents();var placeHolder=$(this._id);if(htmlSource.length>1){placeHolder.append(htmlSource);if(this._addClass){placeHolder.addClass(this._addClass)}placeHolder.show()}}});Tera.xAttach=Class.extend({_attachButtonClass:"",_attachID:0,_wysiwygContainerID:"",init:function(wysiwygContainerID){this._wysiwygContainerID=wysiwygContainerID;WCF.DOMNodeInsertedHandler.addCallback("de.teralios.xattach",$.proxy(this._addButtons,this))},_addButtons:function(){if($(".jsButtonAttachmentInsertThumbnail")){$(".jsButtonAttachmentInsertThumbnail").each($.proxy(this._addButton,this))}if($(".jsButtonAttachmentInsertPlain")){$(".jsButtonAttachmentInsertPlain").each($.proxy(this._addButton,this))}},_addButton:function(key,button){var $ul=$(button).parent().parent();var attachmentID=$(button).data("objectID");var $button=$('<li><span class="button small jsButtonXAttachmentInsert" data-object-id="'+attachmentID+'">'+WCF.Language.get("wcf.bbcode.xattach.insert")+"</span></li>");$button.children("span.button").click($.proxy(this._insert,this));$button.appendTo($ul)},_insert:function(event){var attachmentID=event===null?attachmentID:$(event.currentTarget).data("objectID");var insertText="[xattach="+attachmentID+"][/xattach]";if($.browser.redactor){$("#"+this._wysiwygContainerID).redactor("wutil.insertDynamic",insertText)}}});