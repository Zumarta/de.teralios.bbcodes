"use strict";if(!Tera)var Tera={};Tera.Directory=Class.extend({_id:"",_addClass:"",init:function(a,b){this._id="#"!=a.substring(0,1)?"#"+a:a,this._addClass=b,this.parse()},parse:function(){var a=$("#directoryParse").contents(),b=$(this._id);a.length>1&&(b.append(a),this._addClass&&b.addClass(this._addClass),b.show())}}),Tera.xAttach=Class.extend({_attachButtonClass:"",_attachID:0,_wysiwygContainerID:"",init:function(a){this._wysiwygContainerID=a,WCF.DOMNodeInsertedHandler.addCallback("de.teralios.xattach",$.proxy(this._addButtons,this))},_addButtons:function(){$(".jsButtonAttachmentInsertThumbnail")&&$(".jsButtonAttachmentInsertThumbnail").each($.proxy(this._addButton,this)),$(".jsButtonAttachmentInsertPlain")&&$(".jsButtonAttachmentInsertPlain").each($.proxy(this._addButton,this))},_addButton:function(a,b){var c=$(b).parent().parent(),d=$(b).data("objectID"),e=$('<li><span class="button small jsButtonXAttachmentInsert" data-object-id="'+d+'">'+WCF.Language.get("wcf.bbcode.xattach.insert")+"</span></li>");e.children("span.button").click($.proxy(this._insert,this)),e.appendTo(c)},_insert:function(a){var b=null===a?b:$(a.currentTarget).data("objectID"),c="[xattach="+b+"][/xattach]";$.browser.redactor&&$("#"+this._wysiwygContainerID).redactor("wutil.insertDynamic",c)}});